<!DOCTYPE html>
<html>
    <head>
        <title>
            How Much Longer?
        </title>
        <link href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css' rel='stylesheet' type='text/css'>
        <link href='https://fonts.googleapis.com/css?family=Orbitron|Roboto+Mono' rel='stylesheet' type='text/css'>
        <style>
        body{
        font-family: 'Orbitron', sans-serif;
        background-color: black;
        color: green;
        text-align:center;}
        #clock{font-size:2em;}
        #period {font-size:2em;}
        #timeUntil {font-size: 3em;}
        #timeLeft {font-weight: bold;}
        #clock {font-family: 'Roboto Mono';}
        /* Sticky footer styles
        -------------------------------------------------- */
        html {
        position: relative;
        min-height: 100%;
        }
        body {
        /* Margin bottom by footer height */
        margin-bottom: 60px;
        }
        .footer {
        position: absolute;
        bottom: 0;
        width: 100%;
        /* Set the fixed height of the footer here */
        background-color: #000010;
        }

        h5 {font-weight: bold;}
        </style>
    </head>
    <body>
        <!-- Modal -->

        <div class="modal fade" id="myModal" role="dialog">
            <div class="modal-dialog">
                <!-- Modal content-->

                <div class="modal-content">
                    <div class="modal-header">
                        <button class="close" data-dismiss="modal" type="button">&times;</button>
                        <h4 class="modal-title">
                            Secrets of When
                        </h4>
                    </div>

                    <div class="modal-body">
                        <h5>
                            Keyboard Shortcuts
                        </h5>

                        <p>
                            Ctrl+Shift+[NUM] - Show/Hide Meme
                        </p>

                        <p>
                            Ctrl+Shift+S - Play "Pretty Stupid"<sup>*</sup>
                        </p>
                    </div>

                    <div class="modal-footer">
                        <sup>* Feature Coming Soon</sup> <button class="btn btn-default" data-dismiss="modal" type="button">Close</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- End of Modal -->

        <div id="timeUntil">
        </div>

        <div id="content">
            <div id="meme">
            </div>
        </div>

        <footer class="footer">
            <div class="container">
                <div class="col-md-4">
                    <div id="period">
                    </div>
                </div>

                <div class="col-md-4">
                    <svg data-target="#myModal" data-toggle="modal" style="width:36px;height:36px" viewbox="0 0 24 24">
                    <path d="M15.07,11.25L14.17,12.17C13.45,12.89 13,13.5 13,15H11V14.5C11,13.39 11.45,12.39 12.17,11.67L13.41,10.41C13.78,10.05 14,9.55 14,9C14,7.89 13.1,7 12,7A2,2 0 0,0 10,9H8A4,4 0 0,1 12,5A4,4 0 0,1 16,9C16,9.88 15.64,10.67 15.07,11.25M13,19H11V17H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12C22,6.47 17.5,2 12,2Z" fill="#008000">
                    </path></svg>
                </div>

                <div class="col-md-4">
                    <p id="clock">
                    </p>
                </div>
            </div>
        </footer>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js">
        </script> 
        <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.10.6/moment.min.js">
        </script> 
        <script src="https://cdnjs.cloudflare.com/ajax/libs/livestamp/1.1.2/livestamp.min.js">
        </script> 
        <script src="https://cdnjs.cloudflare.com/ajax/libs/numeral.js/1.5.3/numeral.min.js">
        </script> 
        <script src="http://www.openjs.com/scripts/events/keyboard_shortcuts/shortcut.js">
        </script> 
        <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.5/js/bootstrap.min.js">
        </script> 
        <script>
        // Force HTTP (insecure)
        if (window.location.protocol != "http:"){
        window.location.href = "http:" + window.location.href.substring(window.location.protocol.length);}
        function showTimeUntil(){
        var div = document.getElementById("timeUntil");
        var pd = document.getElementById("period");
        // Define Weekdays, and Early Release Days
        var dayOfWeek = moment().format('dddd');
        if (dayOfWeek == "Monday" || "Tuesday" || "Wednesday" || "Thursday" || "Friday") {
        weekday = true;}
        else if (dayOfWeek = "Saturday" || "Sunday") {
        weekday = false;}
        if (dayOfWeek == "Wednesday") {
        earlyRelease = true;}
        else {earlyRelease = false;}
        // What period is it?
        //   Is it a weekday?
        if (weekday == true) {
        //   Is it an early release day?
        //     Time
        var time = moment().format("HHmm");

        if (earlyRelease == true) {

        if (time > 0815 && time < 0857) {
        var period = 1;
        }
        else if (time > 0858 && time < 0939) {
        var period = 2;
        }
        else if (time > 0940 && time < 1000) {
        var period = 3;
        }
        else if (time > 1001 && time < 1040) {
        var period = 4;
        }
        else if (time > 1041 && time < 1118) {
        var period = 8;
        }
        else if (time > 1119 && time < 1148) {
        var period = 5;
        }
        else if (time > 1149 && time < 1216) {
        var period = 0;
        }
        else if (time > 1217 && time < 1243) {
        var period = 5;
        }
        else if (time > 1244 && time < 1340) {
        var period = 6;
        }
        else if (time > 1341 && time < 1425) {
        var period = 7;
        }

        } else if (earlyRelease == false) {

        if (time > 0815 && time < 0900) {
        var period = 1;
        }
        else if (time > 0901 && time < 0955) {
        var period = 2;
        }
        else if (time > 0956 && time < 1024) {
        var period = 3;
        }
        else if (time > 1025 && time < 1118) {
        var period = 4;
        }
        else if (time > 1119 && time < 1148) {
        var period = 5;
        }
        else if (time > 1149 && time < 1217) {
        var period = 0;
        }
        else if (time > 1218 && time < 1243) {
        var period = 5;
        }
        else if (time > 1244 && time < 1337) {
        var period = 6;
        }
        else if (time > 1338 && time < 1431) {
        var period = 7;
        }
        else if (time > 1432 && time < 1525) {
        var period = 8;
        }

        }
        }
        if (period == 1 && earlyRelease == false) {
        var releaseTime = "09:00";
        }
        else if (period == 1 && earlyRelease == true) {
        var releaseTime = "08:52";
        }
        else if (period == 2 && earlyRelease == false) {
        var releaseTime = "09:54";
        }
        else if (period == 2 && earlyRelease == true) {
        var releaseTime = "09:38";
        }
        else if (period == 3 && earlyRelease == false) {
        var releaseTime = "10:24";
        }
        else if (period == 3 && earlyRelease == true) {
        var releaseTime = "10:00";
        }
        else if (period == 4 && earlyRelease == false) {
        var releaseTime = "11:18";
        }
        else if (period == 4 && earlyRelease == true) {
        var releaseTime = "10:40";
        }
        else if (period == 5 && time > 1122 && time < 1150) {
        var releaseTime = "11:48";
        }
        else if (period == 5 && time > 1215 && time < 1243) {
        var releaseTime = "12:43";
        }

        else if (period == 6 && earlyRelease == false) {
        var releaseTime = "13:37";
        }
        else if (period == 6 && earlyRelease == true) {
        var releaseTime = "13:40";
        }
        else if (period == 7 && earlyRelease == false) {
        var releaseTime = "14:31";
        }
        else if (period == 7 && earlyRelease == true) {
        var releaseTime = "14:25";
        }
        else if (period == 8 && earlyRelease == false) {
        var releaseTime = "15:25";
        }
        else if (period == 8 && earlyRelease == true) {
        var releaseTime = "11:18";
        }
        var iso8601 = moment().format("YYYY-MM-DD") + 'T' + releaseTime + ':00-04:00';
        var insertHTML = '<p>We get out of here <span id="timeLeft" data-livestamp="' + iso8601 + '"><\/span>.<\/p>';
        div.innerHTML = insertHTML;
        var periodOrdinal = numeral(period).format('0o');
        pd.innerHTML = "<p>We are in " + periodOrdinal + " period.<\/p>";
        setTimeout("showTimeUntil()",120000);}
        showTimeUntil()
        function clock() {
        var clock = document.getElementById("clock");
        clock.innerHTML = moment().format("h:mm:ss a");
        setTimeout("clock()",1000);
        }
        clock()     
        // Meme Keyboard Shortcuts
        var funnyMeme = document.getElementById("meme");
        shortcut.add("Ctrl+Shift+1",function() {

            if ( $('#meme').children().length == 0 ) {
        funnyMeme.innerHTML = "<img src='http://sdmemecentral.homenet.org/upload/2015/10/19/20151019151033-7094ed90.jpg'/>";
        }
           else if ( $('#meme').children().length > 0 ) {
        funnyMeme.innerHTML = "";
        }
        });
        shortcut.add("Ctrl+Shift+2",function() {

            if ( $('#meme').children().length == 0 ) {
        funnyMeme.innerHTML = "<img src='http://sdmemecentral.homenet.org/upload/2015/10/14/20151014201055-22401635.jpg'/>";
        }
           else if ( $('#meme').children().length > 0 ) {
        funnyMeme.innerHTML = "";
        }
        });
        </script>
    </body>
</html>
